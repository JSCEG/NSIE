@model NSIE.Models.Modulo

<form id="formEditarModulo" asp-action="GuardarEdicionModulo" asp-controller="Secciones" method="post">
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="SeccionId" />

    <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="fas fa-edit"></i> Editar Módulo</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
    </div>

    <div class="modal-body">
        <div class="mb-3">
            <label asp-for="Title" class="form-label">Título del Módulo</label>
            <input asp-for="Title" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="FundamentoLegalModulo" class="form-label">Fundamento Legal</label>
            <textarea asp-for="FundamentoLegalModulo" class="form-control" rows="2"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="Desc" class="form-label">Descripción</label>
            <textarea asp-for="Desc" class="form-control" rows="2"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="Roles" class="form-label">Roles (IDs separados por coma)</label>
            <input asp-for="Roles" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="NombresRoles" class="form-label">Nombres de Roles</label>
            <input asp-for="NombresRoles" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Perfiles" class="form-label">Perfiles</label>
            <input asp-for="Perfiles" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Etapa" class="form-label">Etapa</label>
            <input asp-for="Etapa" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="JustificacionOrden" class="form-label">Justificación de Orden</label>
            <textarea asp-for="JustificacionOrden" class="form-control"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="AyudaContextual" class="form-label">Ayuda Contextual</label>
            <textarea asp-for="AyudaContextual" class="form-control"></textarea>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Controller" class="form-label">Controller</label>
                <input asp-for="Controller" class="form-control" />
            </div>
            <div class="col-md-6 mb-3">
                <label asp-for="Action" class="form-label">Action</label>
                <input asp-for="Action" class="form-control" />
            </div>
        </div>

        <div class="mb-3">
            <label asp-for="Btn" class="form-label">Texto del Botón</label>
            <input asp-for="Btn" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Img" class="form-label">Ruta de Imagen</label>
            <input asp-for="Img" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="ElementosUI" class="form-label">Elementos UI</label>
            <input asp-for="ElementosUI" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="AyudaVista" class="form-label">Ayuda en Vista</label>
            <textarea asp-for="AyudaVista" class="form-control"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="Orden" class="form-label">Orden</label>
            <input asp-for="Orden" type="number" class="form-control" />
        </div>

        <div class="form-check form-switch mb-3">
            <input asp-for="Activo" class="form-check-input" type="checkbox" role="switch" />
            <label class="form-check-label" asp-for="Activo">¿Activo?</label>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" onclick="guardarCambiosModulo()">
            <i class="fas fa-save me-1"></i> Guardar Cambios
        </button>
    </div>
</form>

<script>
    function guardarCambiosModulo() {
        const form = $("#formEditarModulo");
        $.ajax({
            url: form.attr("action"),
            type: "POST",
            data: form.serialize(),
            success: function () {
                $("#modalEditarModulo").modal("hide");
                location.reload();
            },
            error: function (xhr) {
                Swal.fire("Error", "No se pudo guardar el módulo. " + xhr.responseText, "error");
            }
        });
    }
</script>
