@* 
üîß Mejora visual de esta vista .cshtml sin afectar la l√≥gica existente. Instrucciones para Copilot:

- Aplica estilos profesionales con Bootstrap 5 (cards, tablas, botones, alerts, etc.).
- Usa animaciones AOS en t√≠tulos y secciones importantes.
- Si hay una tabla, int√©grala con DataTables:
  - Soporte de b√∫squeda en tiempo real, paginaci√≥n y exportaci√≥n (Excel, PDF, CSV).
  - Soporte para scroll horizontal si hay muchas columnas.
- Si hay m√©tricas o datos que podr√≠an visualizarse gr√°ficamente, sugiere e incluye un gr√°fico tipo demo con Highcharts (sin romper la l√≥gica actual).
- Mant√©n y respeta todos los scripts, modales y secciones @section ya existentes.
- Conserva todas las estructuras Razor y C# sin cambios en nombres ni flujos.
- Agrega mejoras tipo demo solo si son √∫tiles para el usuario, como:
  - Filtros por unidad o categor√≠a,
  - Cards resumen informativos,
  - Tooltips, badges, alertas informativas con √≠conos,
  - Dashboards embebidos.

üß© Cuando se agreguen ayudas visuales o funcionalidades tipo demo, usa componentes **impactantes y modernos visualmente**, pero que no interrumpan la experiencia del usuario (uso sutil de colores, animaciones y contenedores tipo spotlight o highlight, sin sobrecargar).

üìå Si la vista a√∫n no tiene el componente `_ViewHeader`, gen√©ralo al inicio con un t√≠tulo, descripci√≥n, fundamentos legales y l√≥gica funcional.

‚úÖ Todo el c√≥digo generado debe ser 100% responsive, accesible y visualmente claro tanto en escritorio como en m√≥viles.

IMPORTANTE: No elimines scripts o l√≥gicas ya presentes. Si mejoras algo, debe ser compatible y respetar la l√≥gica principal.

Ahora, mejora esta vista debajo de este comentario.
*@

@model HomeViewModel
@using NSIE.Models
@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json
@inject IHttpContextAccessor HttpContextAccessor

@{
    var header = new HeaderViewModel
    {
        Title = "Origen y Destino de la Energ√≠a",
        IconPath = "sistema.png",
        Description = "Sistema de visualizaci√≥n y an√°lisis de flujos energ√©ticos nacionales.",
        Section = "‚ö° Sistema de Energ√≠a Nacional",
        ModuleInfo = JsonConvert.SerializeObject(new
        {
            title = "Flujos Energ√©ticos",
            description = "Plataforma de monitoreo de origen y destino de energ√≠a.",
            functionality = "Permite analizar flujos y balances energ√©ticos del SEN.",
            stage = "An√°lisis de Flujos",
            roles = new[] {
new { icon = "bolt", text = "CENACE: Control operativo" },
new { icon = "chart-network", text = "T√©cnico: Flujos y balances" },
new { icon = "search", text = "P√∫blico: Consulta" }
},
            order = new { step = 1, description = "Visualizaci√≥n de flujos" }
        })
    };

    // Existing session management
    var perfilJson = HttpContextAccessor.HttpContext.Session.GetString("PerfilUsuario");
    var perfilUsuario = JsonConvert.DeserializeObject<PerfilUsuario>(perfilJson);
    ViewData["NombreUsuario"] = perfilUsuario.Nombre;
    ViewData["RolUsuario"] = perfilUsuario.Rol;
    ViewData["IDUsuario"] = perfilUsuario.IdUsuario;
}

@await Html.PartialAsync("_ViewHeader", header)

<!-- Cards Resumen con AOS -->
<div class="container-fluid px-4 mb-5">
    <div class="row g-4">
        <!-- Card Generaci√≥n -->
        <div class="col-12 col-md-4" data-aos="fade-right">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-primary bg-opacity-10 p-3 rounded-3 me-3">
                            <i class="fas fa-bolt text-primary fs-3"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-0">Generaci√≥n Total</h5>
                            <small class="text-muted">Promedio diario</small>
                        </div>
                    </div>
                    <h3 class="mb-0">85.4 GWh</h3>
                    <div class="progress mt-3" style="height: 8px;">
                        <div class="progress-bar bg-primary" style="width: 75%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card Demanda -->
        <div class="col-12 col-md-4" data-aos="fade-up">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-success bg-opacity-10 p-3 rounded-3 me-3">
                            <i class="fas fa-plug text-success fs-3"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-0">Demanda Total</h5>
                            <small class="text-muted">M√°xima registrada</small>
                        </div>
                    </div>
                    <h3 class="mb-0">82.1 GWh</h3>
                    <div class="progress mt-3" style="height: 8px;">
                        <div class="progress-bar bg-success" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card Balance -->
        <div class="col-12 col-md-4" data-aos="fade-left">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="bg-warning bg-opacity-10 p-3 rounded-3 me-3">
                            <i class="fas fa-balance-scale text-warning fs-3"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-0">Balance Neto</h5>
                            <small class="text-muted">Margen operativo</small>
                        </div>
                    </div>
                    <h3 class="mb-0">+3.3 GWh</h3>
                    <div class="progress mt-3" style="height: 8px;">
                        <div class="progress-bar bg-warning" style="width: 65%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Diagrama Mejorado -->
<div class="container-fluid px-4 mb-5" data-aos="zoom-in">
    <div class="card shadow-sm border-0">
        <div class="card-header bg-white border-0">
            <h5 class="card-title mb-0">
                <i class="fas fa-project-diagram text-primary me-2"></i>
                Diagrama de Flujos Energ√©ticos
            </h5>
        </div>
        <center>
            <div class="">
                <partial name="_DiagramaSEM_N" />
            </div>
        </center>

    </div>
</div>

<!-- Scripts existentes -->
@section Scripts {
    // ...existing scripts...
}
