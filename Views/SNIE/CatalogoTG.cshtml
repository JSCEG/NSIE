@model dynamic
@using Microsoft.AspNetCore.Http
@using Newtonsoft.Json
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Catálogo de Tecnologías de Generación";
    var httpContext = HttpContextAccessor.HttpContext;
    var perfilUsuarioJson = httpContext.Session.GetString("PerfilUsuario");
    var perfilUsuario = JsonConvert.DeserializeObject<PerfilUsuario>(perfilUsuarioJson);
}

<div class="text-center mb-4">
    <h3 class="cp-section cp-grouping-section">
        <img src="~/img/iconos/generacion.png" alt="Icono Generación" class="iconomenu">
        Catálogo de Tecnologías para la Generación de Energía Eléctrica
        <button class="btn btn-link text-info" onclick="mostrarAyudaModulo()" data-bs-toggle="tooltip" title="¿Qué es este módulo?">
            <i class="fas fa-question-circle fa-lg"></i>
        </button>
    </h3>
    <div class="text-muted mt-2 text-justify px-5">
        <i class="fas fa-info-circle text-primary"></i>
        <em>Consulta las principales tecnologías empleadas en la generación de energía eléctrica en México, clasificadas por fuente y eficiencia.</em>
    </div>
</div>

<div class="alert alert-light mb-4" role="alert">
    <nav aria-label="breadcrumb" style="padding-left:15px">
        <ol class="breadcrumb lp-5">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Inicio</a></li>
            <li class="breadcrumb-item active" aria-current="page">@ViewData["Title"]</li>
        </ol>
    </nav>
</div>

<div class="container-fluid ps-5 pe-5 mb-3">
    <div class="alert alert-info">
        <div class="row align-items-center">
            <div class="col-md-2 text-center">
                <img src="~/img/iconos/tecnologia.png" alt="Icono Tecnología" class="img-fluid">
            </div>
            <div class="col-md-10">
                <h5 class="alert-heading mb-2"><i class="fas fa-cogs"></i> Clasificación técnica</h5>
                <p class="mb-1 text-justify">
                    <span class="badge bg-primary">Norma CRE-T-001</span>
                    <span class="badge bg-success ms-2">Base de Datos SENER</span>
                </p>
                <hr>
                <p class="small text-justify">
                    Este catálogo enumera y clasifica las tecnologías utilizadas para la generación eléctrica, identificando su eficiencia térmica, fuente primaria y aplicaciones más comunes en el sistema eléctrico nacional.</p>
            </div>
        </div>
    </div>
</div>

<!-- Tabla de tecnologías -->
<div class="container-fluid ps-5 pe-5">
    <div class="table-responsive">
        <table class="table table-bordered table-sm table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Tecnología</th>
                    <th>Fuente Primaria</th>
                    <th>Eficiencia (%)</th>
                    <th>Aplicación Común</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Ciclo Combinado</td><td>Gas Natural</td><td>55</td><td>Plantas Termoeléctricas</td></tr>
                <tr><td>Fotovoltaica</td><td>Solar</td><td>18</td><td>Granjas Solares</td></tr>
                <tr><td>Hidráulica</td><td>Agua</td><td>90</td><td>Presas</td></tr>
                <tr><td>Biomasa</td><td>Orgánicos</td><td>30</td><td>Plantas Residuos</td></tr>
                <tr><td>Geotérmica</td><td>Calor Terrestre</td><td>45</td><td>Zonas Volcánicas</td></tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Gráfico de barras -->
<div class="container-fluid ps-5 pe-5 mt-4 mb-5">
    <div class="card shadow-sm">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-chart-bar text-primary"></i> Comparativo de Eficiencias</h5>
            <img src="https://quickchart.io/chart?c={type:'bar',data:{labels:['Ciclo Combinado','Fotovoltaica','Hidráulica','Biomasa','Geotérmica'],datasets:[{label:'Eficiencia (%)',data:[55,18,90,30,45]}]}}" alt="Gráfico Eficiencia" class="img-fluid">
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function mostrarAyudaModulo() {
            Swal.fire({
                title: 'Catálogo de Tecnologías de Generación',
                html: `<div class='text-start'>
                    <p>Revisa las tecnologías utilizadas para producir energía eléctrica y compara su eficiencia.</p>
                    <ul>
                        <li><i class='fas fa-cog'></i> Tipos de tecnologías por fuente primaria</li>
                        <li><i class='fas fa-burn'></i> Eficiencia estimada</li>
                        <li><i class='fas fa-bolt'></i> Aplicaciones típicas en el SEN</li>
                    </ul>
                </div>`,
                confirmButtonText: 'Cerrar',
                width: 400
            });
        }
    </script>
}
