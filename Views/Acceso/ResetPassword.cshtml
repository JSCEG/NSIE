@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>EnerGeo</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width" />
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-NXLZHRMM');</script>
    <!-- End Google Tag Manager -->

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous" />

    <!--Custom styles-->
    <link rel="stylesheet" type="text/css" href="~/css/Login.css" />

    <!-- Script del pop-up -->
    <script>
        // Función para cerrar el modal cuando se aceptan los términos
        function acceptTermsAndClose() {
            $('#terms-and-conditions-modal').modal('hide');
        }

        // Mostrar el modal cuando la página esté completamente cargada
        $(document).ready(function () {
         var mostrarModal = '@ViewData["MostrarModal"]' !== 'False';
            if (mostrarModal) {
                $('#terms-and-conditions-modal').modal({
                    backdrop: 'static',
                    keyboard: false
                });
            }
        });
    </script>
 
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NXLZHRMM" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  
    <video autoplay muted loop id="myVideo">
        <source src="/video/Login_n.mp4" type="video/mp4">
    </video>
      
    <div class="container h-100">
        <div class="d-flex justify-content-center h-100">
            <div class="user_card">
                <div class="d-flex justify-content-center">
                    <div class="brand_logo_container">

                        <img src="/img/lc6.png"
                             class="brand_logo" alt="Logo">
                    </div>
                </div>
                <div class="d-flex justify-content-center form_container">
                    @if (ViewData["EsExitoso"] == null || !(bool)ViewData["EsExitoso"])
                    {
                        <!-- Mostrar formulario de restablecimiento de contraseña -->
                        <form action="@Url.Action("ResetPassword", "Acceso")" method="post">
                            <h4 class="display-6 titulo fw-bold text-center"><strong>¡Restablezca su contraseña!</strong></h4>
                            <div class="input-group mb-2 pt-0">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input id="Token" type="text" name="Token" class="form-control input_user"
                                    value="" placeholder="Ingrese su Token" required autocomplete="off">
                            </div>
                            <div class="input-group mb-2">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input type="password" name="Clave" class="form-control input_pass" value=""
                                    placeholder="Nueva contraseña" required autocomplete="new-password">
                            </div>

                            <div class="input-group mb-2">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input type="password" name="ConfirmarClave" class="form-control input_pass" value=""
                                    placeholder="Confirmar contraseña" required autocomplete="new-password">
                            </div>

                            @if (ViewData["Mensaje"] != null)
                            {
                                <div class="alert alert-danger text-center" role="alert">
                                    @ViewData["Mensaje"]
                                </div>
                            }

                            <div class="d-flex justify-content-center mt-3 login_container">
                                <button type="submit" name="button" class="btn login_btn">Restablecer contraseña</button>
                            </div>
                        </form>

                    }

                    else
                    {
                        <!-- Mostrar mensaje de éxito y enlace de retorno -->
  
                        <div class="container">
                            <div class="row">
                                <div class="col alert alert-success text-center" role="alert">
                                      @ViewData["Mensaje"]
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <center>
                                        <a class="btn login_btn" href="@Url.Action("Login", "Acceso")">Volver al inicio de sesión</a>

                                    </center>
                                </div>
                            </div>
                        </div>

                    }
                </div>

            </div>
        </div>
    </div>

    <script>
        function validar() {
            var campo = document.getElementById("Correo").value.trim();
            if (campo == "") {
                alert("El campo está vacío. Por favor ingresa un valor.");
                event.preventDefault(); // evita que el formulario se envíe
            }
        }
    </script>
</body>
</html>